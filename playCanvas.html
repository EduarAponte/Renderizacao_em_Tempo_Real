<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renderização em Tempo Real</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header>
        <img src="img/logo.png" alt="Logo do Site">
        <h1>Renderização em Tempo Real</h1>
    </header>

    <nav>
        <a href="index.html">Exemplo de Uso</a>
        <a href="three.htm">Biblioteca Three</a>
        <a href="playCanvas.html">Biblioteca PlayCanvas</a>
        <a href="Babilonia.html">Biblioteca Babilonia</a>
    </nav>
<body>
    <script src="https://code.playcanvas.com/playcanvas-stable.min.js"></script>
<!-- <script src="js/playcanvas-latest.js"></script>     -->
<canvas id="application-canvas"></canvas>
<script>
    var canvas = document.getElementById("application-canvas");
    var app = new pc.Application(canvas);
    app.start();
    app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
    app.setCanvasResolution(pc.RESOLUTION_AUTO);

    // Encapsulate entity creation
    function createCamera() {
        var camera = new pc.Entity();
        camera.addComponent("camera", { clearColor: new pc.Color(0.8, 0.8, 0.8) });
        app.root.addChild(camera);
        camera.setPosition(0, 0, 7); 
        return camera;
    }

    function createBox() {
        var box = new pc.Entity();
        box.addComponent("model", { type: "box" });
        app.root.addChild(box);
        box.rotate(10, 15, 0);

        var boxMaterial = createMaterial(0, 0.58, 0.86);
        box.model.model.meshInstances[0].material = boxMaterial;
        box.translate(-2, 0, 0);

        return box;
    }

    function createLight() {
        var light = new pc.Entity();
        light.addComponent('light');  
        light.rotate(45, 0, 0);
        app.root.addChild(light);
        app.scene.ambientLight = new pc.Color(0.2, 0.2, 0.2);
        return light;
    }

    function createMaterial(r, g, b) {
        var material = new pc.PhongMaterial();
        material.diffuse.set(r, g, b);
        material.update();
        return material;
    }

    function createCylinder() {
        var cylinder = new pc.Entity();
        cylinder.addComponent("model", { type: "cylinder" });
        app.root.addChild(cylinder);
        cylinder.rotate(15, 0, 0);

        var cylinderMaterial = createMaterial(1, 0.58, 0);
        cylinder.model.model.meshInstances[0].material = cylinderMaterial;

        return cylinder;
    }

    function createCone() {
        var cone = new pc.Entity();
        cone.addComponent("model", { type: "cone" });
        app.root.addChild(cone);
        cone.translate(2, 0, 0);

        var coneMaterial = createMaterial(0.9, 0.9, 0.9);
        cone.model.model.meshInstances[0].material = coneMaterial;

        return cone;
    }

    var camera = createCamera();
    var box = createBox();
    var light = createLight();
    var cylinder = createCylinder();
    var cone = createCone();

    var timer = 0;
    var ROTATION_SPEED = 10;

    app.on("update", function (deltaTime) {
        timer += deltaTime;
        box.rotate(deltaTime * ROTATION_SPEED, deltaTime * ROTATION_SPEED * 2, deltaTime * ROTATION_SPEED / 3);
        cylinder.setLocalScale(1, Math.abs(Math.sin(timer)), 1);
        cone.setPosition(2, Math.sin(timer * 2), 0);
    });
</script>
</body>
</html>
